import{r as u,p as C,j as l,a6 as _,d as y,k as N,i as F,c as f,R as $}from"./index-22564d29.js";import{I as S}from"./Input-e8c88e5c.js";import{k as T}from"./popover-af5c7c25.js";const v="",A=40;function K(n,t){return n.replaceAll(t,`<b class="inline-block text-brand-500 bg-brand-10">${t}</b>`)}function O(n=[],t){return n.reduce((a,[o,r])=>{const s=r.indexOf(t.toLocaleLowerCase());if(s>-1){const m=Math.max(0,s-A),d=Math.min(r.length-1,s+t.length+A);a.push([o,`${m>0?"... ":v}${r.slice(m,d)}${d<r.length?" ...":v}`])}return a},[])}function D({nativeEvent:n}){return window.TouchEvent?n instanceof TouchEvent:"touches"in n}function P(n){return n.nativeEvent instanceof MouseEvent}function U(n){const t=u.useRef(null),a=u.useRef(n);return u.useLayoutEffect(()=>{a.current=n}),u.useEffect(()=>{const o=r=>{const s=t.current;s&&!s.contains(r.target)&&a.current(r)};return document.addEventListener("mousedown",o),document.addEventListener("touchstart",o),()=>{document.removeEventListener("mousedown",o),document.removeEventListener("touchstart",o)}},[]),t}function Q(n,t={}){const{threshold:a=400,onStart:o,onFinish:r,onCancel:s}=t,m=u.useRef(!1),d=u.useRef(!1),h=u.useRef();return u.useMemo(()=>{if(typeof n!="function")return{};const p=c=>{!P(c)&&!D(c)||(o&&o(c),d.current=!0,h.current=setTimeout(()=>{n(c),m.current=!0},a))},w=c=>{!P(c)&&!D(c)||(m.current?r&&r(c):d.current&&s&&s(c),m.current=!1,d.current=!1,h.current&&window.clearTimeout(h.current))};return{...{onMouseDown:p,onMouseUp:w,onMouseLeave:w},...{onTouchStart:p,onTouchEnd:w}}},[n,a,s,r,o])}const B=$.forwardRef(function({value:t,placeholder:a,size:o=f.md,autoFocus:r=!1,onInput:s,onKeyDown:m,className:d},h){return l.jsx(S,{className:d,size:o,children:({className:p})=>l.jsx(S.Textfield,{ref:h,className:y(p,"w-full"),autoFocus:r,placeholder:a,value:t,onInput:s,onKeyDown:m})})});function V({list:n,size:t=f.sm,searchBy:a,displayBy:o,onSelect:r,to:s,autoFocus:m=!1,isFullWidth:d=!1}){const h=C(),p=u.useRef(null),w=u.useRef(null),j=u.useMemo(()=>n.map(e=>[e,e[a]]),[n]),[g,c]=u.useState(v),[x,E]=u.useState(0),H=U(()=>{c(v)}),R=g!==v,L=O(j,g);function M(){var e;E(0),c(v),(e=w.current)==null||e.focus()}function I(){var i;const e=(i=L[x])==null?void 0:i[0];N(e)||(N(s)?r==null||r(e):h(s(e)),M())}return l.jsx("div",{className:"px-2 py-1 relative",ref:H,onKeyDown:e=>{e.key==="Escape"&&M()},children:l.jsxs(T,{className:"relative flex",children:[l.jsx(T.Button,{ref:w,as:B,className:"w-full !m-0",size:t,value:g,placeholder:"Search",onInput:e=>{c(e.target.value.trim())},onKeyDown:e=>{var i;(e.key==="ArrowDown"||e.key==="ArrowUp")&&((i=p.current)==null||i.focus())},autoFocus:m}),l.jsx(_,{show:R,as:u.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",children:l.jsx(T.Panel,{static:!0,focus:!0,className:y("absolute z-10  transform cursor-pointer rounded-lg bg-theme border-4 border-primary-20","p-2 bg-theme dark:bg-theme-lighter max-h-[25vh] overflow-auto hover:scrollbar scrollbar--vertical scrollbar--horizontal shadow-2xl",t===f.sm&&"mt-10",t===f.md&&"mt-12",t===f.lg&&"mt-14",d?"w-full":"w-full max-w-[20rem]"),ref:p,onKeyDown:e=>{e.key==="ArrowUp"&&x>0&&E(x-1),e.key==="ArrowDown"&&x<L.length-1&&E(x+1),e.key==="Enter"&&(e.preventDefault(),I())},onMouseOver:e=>{e.stopPropagation();const i=e.target.closest('[role="menuitem"]');if(N(i))return;const b=Number(i.dataset.index);E(Number(b))},children:F(L)&&R?l.jsx("div",{className:y(t===f.sm&&"p-1",t===f.md&&"p-2",t===f.lg&&"p-3"),children:"No Results Found"},"not-found"):L.map(([e,i],b)=>l.jsx("div",{role:"menuitem","data-index":b,className:y("cursor-pointer rounded-lg",x===b&&"bg-primary-20"),children:l.jsx(G,{item:e,index:i,search:g,displayBy:o,size:t,onClick:k=>{k.stopPropagation(),k.preventDefault(),I()}})},i))})})]})})}function G({item:n,index:t,search:a,displayBy:o,size:r,onClick:s}){return l.jsxs("div",{onClick:s,className:y("font-normal w-full overflow-hidden whitespace-nowrap overflow-ellipsis px-2",r===f.sm&&"text-sm py-1",r===f.md&&"text-md py-2",r===f.lg&&"text-lg py-3"),children:[l.jsx("span",{className:"font-bold",children:n[o]}),l.jsx("small",{className:"block text-neutral-600 italic overflow-hidden whitespace-nowrap overflow-ellipsis",dangerouslySetInnerHTML:{__html:K(t,a)}})]})}export{V as S,Q as u};
