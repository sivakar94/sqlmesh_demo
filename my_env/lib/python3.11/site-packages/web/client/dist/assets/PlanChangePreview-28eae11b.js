import{r as s,H as Y,aq as ie,D as J,I as X,y as Z,X as Q,w as N,R,ad as ke,ah as oe,K as D,ar as te,V as B,as as ae,B as Ee,ae as Pe,af as ye,ag as Ce,at as Te,au as De,P as ne,z as Fe,Y as Oe,j as a,d as k,a as $e,a7 as le,Z as Ae,a0 as se,e as Me}from"./index-22564d29.js";import{E as m,b as Se,u as de,c as Le}from"./context-590d39df.js";import{T as Ie,p as _e,f as Ge,L as We}from"./context-cc73b64e.js";import ze from"./ModelLineage-96ab515c.js";import{P as Be}from"./PlusIcon-04528d91.js";import{v as F,M as ce,P as ue}from"./disclosure-47be1803.js";function He({title:r,titleId:t,...e},n){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":t},e),r?s.createElement("title",{id:t},r):null,s.createElement("path",{fillRule:"evenodd",d:"M12 5.25c1.213 0 2.415.046 3.605.135a3.256 3.256 0 013.01 3.01c.044.583.077 1.17.1 1.759L17.03 8.47a.75.75 0 10-1.06 1.06l3 3a.75.75 0 001.06 0l3-3a.75.75 0 00-1.06-1.06l-1.752 1.751c-.023-.65-.06-1.296-.108-1.939a4.756 4.756 0 00-4.392-4.392 49.422 49.422 0 00-7.436 0A4.756 4.756 0 003.89 8.282c-.017.224-.033.447-.046.672a.75.75 0 101.497.092c.013-.217.028-.434.044-.651a3.256 3.256 0 013.01-3.01c1.19-.09 2.392-.135 3.605-.135zm-6.97 6.22a.75.75 0 00-1.06 0l-3 3a.75.75 0 101.06 1.06l1.752-1.751c.023.65.06 1.296.108 1.939a4.756 4.756 0 004.392 4.392 49.413 49.413 0 007.436 0 4.756 4.756 0 004.392-4.392c.017-.223.032-.447.046-.672a.75.75 0 00-1.497-.092c-.013.217-.028.434-.044.651a3.256 3.256 0 01-3.01 3.01 47.953 47.953 0 01-7.21 0 3.256 3.256 0 01-3.01-3.01 47.759 47.759 0 01-.1-1.759L6.97 15.53a.75.75 0 001.06-1.06l-3-3z",clipRule:"evenodd"}))}const Ue=s.forwardRef(He),me=Ue;function qe({title:r,titleId:t,...e},n){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":t},e),r?s.createElement("title",{id:t},r):null,s.createElement("path",{fillRule:"evenodd",d:"M3.75 12a.75.75 0 01.75-.75h15a.75.75 0 010 1.5h-15a.75.75 0 01-.75-.75z",clipRule:"evenodd"}))}const Ke=s.forwardRef(qe),Ve=Ke;function Ye({container:r,accept:t,walk:e,enabled:n=!0}){let i=s.useRef(t),d=s.useRef(e);s.useEffect(()=>{i.current=t,d.current=e},[t,e]),Y(()=>{if(!r||!n)return;let o=ie(r);if(!o)return;let c=i.current,u=d.current,E=Object.assign(O=>c(O),{acceptNode:c}),w=o.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,E,!1);for(;w.nextNode();)u(w.currentNode)},[r,n,i,d])}let pe=s.createContext(null);function xe(){let r=s.useContext(pe);if(r===null){let t=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,xe),t}return r}function fe(){let[r,t]=s.useState([]);return[r.length>0?r.join(" "):void 0,s.useMemo(()=>function(e){let n=N(d=>(t(o=>[...o,d]),()=>t(o=>{let c=o.slice(),u=c.indexOf(d);return u!==-1&&c.splice(u,1),c}))),i=s.useMemo(()=>({register:n,slot:e.slot,name:e.name,props:e.props}),[n,e.slot,e.name,e.props]);return R.createElement(pe.Provider,{value:i},e.children)},[t])]}let Je="label";function Xe(r,t){let e=X(),{id:n=`headlessui-label-${e}`,passive:i=!1,...d}=r,o=xe(),c=Z(t);Y(()=>o.register(n),[n,o.register]);let u={ref:c,...o.props,id:n};return i&&("onClick"in u&&(delete u.htmlFor,delete u.onClick),"onClick"in d&&delete d.onClick),Q({ourProps:u,theirProps:d,slot:o.slot||{},defaultTag:Je,name:o.name||"Label"})}let Ze=J(Xe),Qe=Object.assign(Ze,{});var er=(r=>(r[r.RegisterOption=0]="RegisterOption",r[r.UnregisterOption=1]="UnregisterOption",r))(er||{});let rr={0(r,t){let e=[...r.options,{id:t.id,element:t.element,propsRef:t.propsRef}];return{...r,options:Oe(e,n=>n.element.current)}},1(r,t){let e=r.options.slice(),n=r.options.findIndex(i=>i.id===t.id);return n===-1?r:(e.splice(n,1),{...r,options:e})}},ee=s.createContext(null);ee.displayName="RadioGroupDataContext";function ve(r){let t=s.useContext(ee);if(t===null){let e=new Error(`<${r} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(e,ve),e}return t}let re=s.createContext(null);re.displayName="RadioGroupActionsContext";function he(r){let t=s.useContext(re);if(t===null){let e=new Error(`<${r} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(e,he),e}return t}function tr(r,t){return Fe(t.type,rr,r,t)}let ar="div";function nr(r,t){let e=X(),{id:n=`headlessui-radiogroup-${e}`,value:i,defaultValue:d,form:o,name:c,onChange:u,by:E=(l,f)=>l===f,disabled:w=!1,...O}=r,P=N(typeof E=="string"?(l,f)=>{let x=E;return(l==null?void 0:l[x])===(f==null?void 0:f[x])}:E),[$,A]=s.useReducer(tr,{options:[]}),v=$.options,[_,q]=fe(),[y,M]=oe(),S=s.useRef(null),K=Z(S,t),[h,G]=Ie(i,u,d),g=s.useMemo(()=>v.find(l=>!l.propsRef.current.disabled),[v]),C=s.useMemo(()=>v.some(l=>P(l.propsRef.current.value,h)),[v,h]),b=N(l=>{var f;if(w||P(l,h))return!1;let x=(f=v.find(T=>P(T.propsRef.current.value,l)))==null?void 0:f.propsRef.current;return x!=null&&x.disabled?!1:(G==null||G(l),!0)});Ye({container:S.current,accept(l){return l.getAttribute("role")==="radio"?NodeFilter.FILTER_REJECT:l.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(l){l.setAttribute("role","none")}});let V=N(l=>{let f=S.current;if(!f)return;let x=ie(f),T=v.filter(p=>p.propsRef.current.disabled===!1).map(p=>p.element.current);switch(l.key){case D.Enter:_e(l.currentTarget);break;case D.ArrowLeft:case D.ArrowUp:if(l.preventDefault(),l.stopPropagation(),te(T,B.Previous|B.WrapAround)===ae.Success){let p=v.find(L=>L.element.current===(x==null?void 0:x.activeElement));p&&b(p.propsRef.current.value)}break;case D.ArrowRight:case D.ArrowDown:if(l.preventDefault(),l.stopPropagation(),te(T,B.Next|B.WrapAround)===ae.Success){let p=v.find(L=>L.element.current===(x==null?void 0:x.activeElement));p&&b(p.propsRef.current.value)}break;case D.Space:{l.preventDefault(),l.stopPropagation();let p=v.find(L=>L.element.current===(x==null?void 0:x.activeElement));p&&b(p.propsRef.current.value)}break}}),j=N(l=>(A({type:0,...l}),()=>A({type:1,id:l.id}))),W=s.useMemo(()=>({value:h,firstOption:g,containsCheckedOption:C,disabled:w,compare:P,...$}),[h,g,C,w,P,$]),we=s.useMemo(()=>({registerOption:j,change:b}),[j,b]),je={ref:K,id:n,role:"radiogroup","aria-labelledby":_,"aria-describedby":y,onKeyDown:V},Re=s.useMemo(()=>({value:h}),[h]),z=s.useRef(null),Ne=Ee();return s.useEffect(()=>{z.current&&d!==void 0&&Ne.addEventListener(z.current,"reset",()=>{b(d)})},[z,b]),R.createElement(M,{name:"RadioGroup.Description"},R.createElement(q,{name:"RadioGroup.Label"},R.createElement(re.Provider,{value:we},R.createElement(ee.Provider,{value:W},c!=null&&h!=null&&Ge({[c]:h}).map(([l,f],x)=>R.createElement(Pe,{features:ye.Hidden,ref:x===0?T=>{var p;z.current=(p=T==null?void 0:T.closest("form"))!=null?p:null}:void 0,...Ce({key:l,as:"input",type:"radio",checked:f!=null,hidden:!0,readOnly:!0,form:o,name:l,value:f})})),Q({ourProps:je,theirProps:O,slot:Re,defaultTag:ar,name:"RadioGroup"})))))}var lr=(r=>(r[r.Empty=1]="Empty",r[r.Active=2]="Active",r))(lr||{});let sr="div";function ir(r,t){var e;let n=X(),{id:i=`headlessui-radiogroup-option-${n}`,value:d,disabled:o=!1,...c}=r,u=s.useRef(null),E=Z(u,t),[w,O]=fe(),[P,$]=oe(),{addFlag:A,removeFlag:v,hasFlag:_}=Te(1),q=De({value:d,disabled:o}),y=ve("RadioGroup.Option"),M=he("RadioGroup.Option");Y(()=>M.registerOption({id:i,element:u,propsRef:q}),[i,M,u,r]);let S=N(j=>{var W;if(ne(j.currentTarget))return j.preventDefault();M.change(d)&&(A(2),(W=u.current)==null||W.focus())}),K=N(j=>{if(ne(j.currentTarget))return j.preventDefault();A(2)}),h=N(()=>v(2)),G=((e=y.firstOption)==null?void 0:e.id)===i,g=y.disabled||o,C=y.compare(y.value,d),b={ref:E,id:i,role:"radio","aria-checked":C?"true":"false","aria-labelledby":w,"aria-describedby":P,"aria-disabled":g?!0:void 0,tabIndex:(()=>g?-1:C||!y.containsCheckedOption&&G?0:-1)(),onClick:g?void 0:S,onFocus:g?void 0:K,onBlur:g?void 0:h},V=s.useMemo(()=>({checked:C,disabled:g,active:_(2)}),[C,g,_]);return R.createElement($,{name:"RadioGroup.Description"},R.createElement(O,{name:"RadioGroup.Label"},Q({ourProps:b,theirProps:c,slot:V,defaultTag:sr,name:"RadioGroup.Option"})))}let or=J(nr),dr=J(ir),H=Object.assign(or,{Option:dr,Label:Qe,Description:ke});function I({children:r,headline:t,type:e,className:n}){return a.jsxs("div",{className:k("flex flex-col rounded-md p-4 overflow-hidden overflow-y-auto hover:scrollbar scrollbar--vertical scrollbar--horizontal",e===m.Add&&"bg-success-10",e===m.Remove&&"bg-danger-10",e===m.Direct&&"bg-secondary-10",e===m.Indirect&&"bg-warning-10",e==="metadata"&&"bg-neutral-10",n),children:[t!=null&&a.jsx("h4",{className:k("mb-2 font-bold whitespace-nowrap",e===m.Add&&"text-success-600 dark:text-success-300",e===m.Remove&&"text-danger-600 dark:text-danger-300",e===m.Direct&&"text-secondary-600 dark:text-secondary-300",e===m.Indirect&&"text-warning-600 dark:text-warning-300",e===m.Metadata&&"text-neutral-600 dark:text-neutral-300"),children:t}),r]})}function cr({changes:r=[],type:t}){return a.jsx("ul",{children:r.map(e=>a.jsxs("li",{className:k("flex items-center px-1 leading-5 mb-1",t===m.Add&&"text-success-600 dark:text-success-300",t===m.Remove&&"text-danger-600 dark:text-danger-300",t===m.Direct&&"text-secondary-600 dark:text-secondary-300",t===m.Indirect&&"text-warning-600 dark:text-warning-300",t===m.Metadata&&"text-neutral-600 dark:text-neutral-300"),children:[t===m.Add?a.jsx(Be,{className:"h-3 mr-2"}):t===m.Remove?a.jsx(Ve,{className:"h-3 mr-2"}):a.jsx(me,{className:"h-4 mr-2"}),a.jsx("small",{className:"w-full text-xs whitespace-nowrap text-ellipsis overflow-hidden",children:e})]},e))})}function ur({changes:r=[]}){const t=$e(e=>e.models);return a.jsx("ul",{children:r.map(e=>a.jsx("li",{className:"text-secondary-500 dark:text-primary-500",children:a.jsx(F,{children:({open:n})=>a.jsxs(a.Fragment,{children:[a.jsxs(F.Button,{className:"flex items-start w-full justify-between rounded-lg text-left",children:[a.jsx("div",{className:"w-full",children:a.jsx(U,{model_name:e.model_name})}),(()=>{const i=n?ce:ue;return a.jsx(i,{className:"max-h-[1rem] min-w-[1rem] dark:text-primary-500 mt-0.5"})})()]}),a.jsxs(F.Panel,{className:"text-sm px-4 mb-4",children:[a.jsx(ge,{type:"indirect",models:e.indirect??[]}),a.jsx(le,{className:"border-neutral-200 mt-2"}),a.jsx(mr,{change:e}),a.jsx(le,{className:"border-neutral-200 mt-2"}),(e==null?void 0:e.diff)!=null&&a.jsx(be,{diff:e==null?void 0:e.diff}),(()=>{const i=t.get(e.model_name);return i==null?a.jsx(a.Fragment,{}):a.jsx("div",{className:"h-[16rem] bg-theme-lighter rounded-xl p-2",children:a.jsx(We,{withColumns:!1,children:a.jsx(ze,{fingerprint:i.id,model:i,highlightedNodes:{"border-4 border-secondary-500":[i.name],"border-4 border-warning-500":e.indirect??[],"*":["opacity-50 hover:opacity-100"]}},i.id)})})})()]})]})})},e.model_name))})}function mr({change:r}){var d;const t=Se(),{change_categorization:e,categories:n}=de(),i=Ae(o=>o.state);return a.jsx(H,{className:k("flex flex-col mt-2",i===se.Finished?"opacity-50 cursor-not-allowed":"cursor-pointer"),value:(d=e.get(r.model_name))==null?void 0:d.category,onChange:o=>{t({type:Le.Category,category:o,change:r})},disabled:i===se.Finished,children:n.map(o=>a.jsx(H.Option,{value:o,className:()=>k("relative flex rounded-md"),children:({checked:c})=>a.jsxs("div",{className:k("text-sm flex px-2 py-1 w-full rounded-lg",c?"text-secondary-500 dark:text-primary-300":"text-prose"),children:[a.jsx("div",{className:"mt-[0.125rem] mr-2 border-2 border-neutral-400 min-w-[1rem] h-4 rounded-full flex justify-center items-center",children:c&&a.jsx("span",{className:"inline-block w-2 h-2 bg-secondary-500 dark:bg-primary-300 rounded-full"})}),a.jsxs("div",{children:[a.jsx(H.Label,{as:"p",children:o.name}),a.jsx(H.Description,{as:"span",className:"text-xs text-neutral-500",children:o.description})]})]})},o.name))})}function pr({changes:r=[]}){return a.jsx("ul",{children:r.map(t=>a.jsx("li",{className:"text-warning-700 dark:text-warning-500",children:Me(t.direct)?a.jsx(F,{children:({open:e})=>a.jsxs(a.Fragment,{children:[a.jsxs(F.Button,{className:"flex items-center w-full justify-between rounded-lg text-left",children:[a.jsx(U,{model_name:t.model_name}),(()=>{const n=e?ce:ue;return a.jsx(n,{className:"max-h-[1rem] min-w-[1rem] dark:text-primary-500 mt-0.5"})})()]}),a.jsx(F.Panel,{className:"text-sm px-4 mb-4",children:a.jsx(ge,{type:"direct",models:t.direct??[]})})]})}):a.jsx(U,{model_name:t.model_name})},t.model_name))})}function U({model_name:r}){var n;const{change_categorization:t}=de(),e=(n=t.get(r))==null?void 0:n.category;return a.jsxs("div",{className:"flex items-center font-bold",children:[a.jsx(me,{className:"h-4 mr-2"}),a.jsx("small",{className:"w-full text-xs whitespace-nowrap text-ellipsis overflow-hidden",children:r}),e!=null&&a.jsx("span",{className:"ml-2 text-xs px-1 bg-neutral-400 text-neutral-100  dark:bg-neutral-400 dark:text-neutral-800 rounded whitespace-nowrap mr-2",children:e.name})]})}function ge({type:r,models:t}){return a.jsx("ul",{className:k("mt-2 ml-4",r==="indirect"&&"text-warning-700 dark:text-warning-500",r==="direct"&&"text-secondary-500 dark:text-primary-500"),children:t.map(e=>a.jsxs("li",{className:"flex",children:[a.jsx("span",{className:"h-3 w-3 border-l-2 border-b-2 inline-block mr-2"}),e]},e))})}function be({diff:r}){return a.jsx("div",{className:"my-4 bg-dark-lighter rounded-lg overflow-hidden",children:a.jsx("pre",{className:"p-4 text-primary-100 max-h-[30vh] overflow-auto hover:scrollbar scrollbar--vertical scrollbar--horizontal",children:r.split(`
`).map((t,e)=>a.jsx("p",{className:k(t.startsWith("+")&&"text-success-500 bg-success-500/10 px-2",t.startsWith("-")&&"text-danger-500 bg-danger-500/10 px-2",t.startsWith("@@")&&"text-primary-300 my-5 px-2"),children:t},`${t}-${e}`))})})}I.Default=cr;I.Direct=ur;I.Indirect=pr;I.Diff=be;I.Title=U;export{Ye as F,fe as H,Qe as M,I as P};
